# 函数优化

上边说到了`lazy parse`懒解析，本质上对于没有调用的函数并不会解析进行堆内存的分配。提升性能，

## `lazy parse`懒解析 VS `eager parsing` 饥饿解析

但是显示中对于一些函数声明后立马就要调用，就会导致 V8 对于`lazy parse`然后在进行`eager parsing`，实际上会导致效率被降低了。

## 立即执行函数告诉 V8

所以我们需要告诉 V8 我们这个函数是一个立即执行函数，不需要进行`lazy parse`而是直接进行`eager parsing`.

其实很简单，只需要在函数声明的时候用**括号**包起来就行了。

```js
const add = (num1, num2) => {
  return num1 + num2;
};
add(1, 2);
```

默认时，会对上边声明的`add`函数进行一个懒解析，等到真正调用的时候才会进行真正解析这个函数。

其实如果要应用`eager parsing`的话，特别简单

```js
const add = ((num1, num2) => {
  return num1 + num2;
});
```

**当通过一对括号，将函数的声明包括起来**，那么当 V8 解析到这个函数的时候就不会进行默认的懒解析了，而是直接进行`eager parsing`，等到开始调用的时候因为函数已经会提前解析了，所以效率就特别高了。

::: tip
当然，往往我们使用一些压缩打包工具,比如`webpack`会将最终的`js`代码进行压缩，可以使用`optimize`或者其他，(其实`webpack`中的 ug/terser)等插件现在也可以完美的解决这个问题，可以将压缩去掉的括号补全回来。
:::
