# 奇 yin 技巧

- keyof 正是赋予了开发者查询索引类型的能力(访问 key 类型)

- 这就需要索引访问符出场了，与 JavaScript 种访问属性值的操作类似，访问类型的操作符也是通过 [] 来访问的，即 T[K]。(访问 value 类型)

我们有一个 User 接口，现在有一个需求是把 User 接口中的成员全部变成可选的，我们应该怎么做？难道要重新一个个:前面加上?,有没有更便捷的方法？

```ts
interface User {
  username: string;
  id: number;
  token: string;
  avatar: string;
  role: string;
}
```

这个时候映射类型就派上用场了，映射类型的语法是`[K in Keys]:`

- K：类型变量，依次绑定到每个属性上，对应每个属性名的类型

- Keys：字符串字面量构成的联合类型，表示一组属性名（的类型）

那么我们应该如何操作呢？

首先，我们得找到`Keys`，即字符串字面量构成的联合类型，这就得使用上一节我们提到的 keyof 操作符，假设我们传入的类型是泛型 T，得到`keyof T`，即传入类型 T 的属性名的联合类型。

然后我们需要将`keyof T`的属性名称一一映射出来`[K in keyof T]`，如果我们要把所有的属性成员变为可选类型，那么需要 `T[K]`取出相应的属性值，最后我们重新生成一个可选的新类型`{ [K in keyof T]?: T[K] }`。

用类型别名表示就是：

```ts
type partial<T> = { [K in keyof T]?: T[K] };
```
