(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{417:function(v,_,t){"use strict";t.r(_);var e=t(42),s=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"缩短-js-解析时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缩短-js-解析时间"}},[v._v("#")]),v._v(" 缩短 JS 解析时间")]),v._v(" "),t("p",[v._v("用一段相同大小的"),t("code",[v._v("javascript")]),v._v("脚本和"),t("code",[v._v("png")]),v._v("图片到浏览器上，可以发现"),t("code",[v._v("js")]),v._v("的执行时间远远大于同等尺寸的图片。")]),v._v(" "),t("p",[v._v("因为浏览器对于图片的解压特别快，而"),t("code",[v._v("js")]),v._v("到最终执行完毕需要经过"),t("strong",[v._v("编译，解析，执行")]),v._v("这个过程。尤其是"),t("code",[v._v("js")]),v._v("解析的过程，这个过程非常耗时。")]),v._v(" "),t("p",[v._v("虽然浏览器解析 js 看起来我们并没有办法去优化它，但是我们可以在代码层面做一些优化去配合浏览器解析。")]),v._v(" "),t("h2",{attrs:{id:"解决方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[v._v("#")]),v._v(" 解决方法")]),v._v(" "),t("h3",{attrs:{id:"代码体积方面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码体积方面"}},[v._v("#")]),v._v(" 代码体积方面")]),v._v(" "),t("ul",[t("li",[v._v("Code Splitting 代码拆分，按需加载。")])]),v._v(" "),t("blockquote",[t("p",[v._v("尽可能的提高代码的 code coverage，保证当前页面渲染时仅加载必须的 js 脚本就可以渲染。其他的暂时没有用到的交给"),t("code",[v._v("prefetch")]),v._v("和"),t("code",[v._v("lazy loading")]),v._v("。")])]),v._v(" "),t("ul",[t("li",[v._v("Tree Shaking 删除无用代码")])]),v._v(" "),t("blockquote",[t("p",[v._v("对于一些项目中没有使用过的 js 代码(无用代码)，及时删除减少包体积。")])]),v._v(" "),t("h3",{attrs:{id:"代码层面优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码层面优化"}},[v._v("#")]),v._v(" 代码层面优化")]),v._v(" "),t("ul",[t("li",[v._v("避免长任务")])]),v._v(" "),t("ul",[t("li",[v._v("避免超过"),t("code",[v._v("1KB")]),v._v("的行间脚本")])]),v._v(" "),t("blockquote",[t("p",[v._v("行间脚本要避免过长，大多数时候使用行间脚本是为了加快首屏的加载。把一些首屏幕的 js 或者 css 行间化，但是这样一定要合理规划。")])]),v._v(" "),t("ul",[t("li",[v._v("合理通过"),t("code",[v._v("rAF")]),v._v("和"),t("code",[v._v("rIC")]),v._v("进行调度。")])]),v._v(" "),t("blockquote",[t("p",[v._v("通过"),t("code",[v._v("requestAnimationFrame")]),v._v("和"),t("code",[v._v("requestIdleCallback")]),v._v("进行合理的时间调度。")])]),v._v(" "),t("ul",[t("li",[v._v("可见不可交互 vs 最小可交互资源集")])]),v._v(" "),t("blockquote",[t("p",[v._v("减少初次加载资源量。")])]),v._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2021/02/05/jyfhdK5pCYFrUum.png",alt:"截屏2021-02-05 下午8.52.13.png"}})]),v._v(" "),t("p",[v._v("注意一下几个时间节点:")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("First paint\n页面第一次绘制出有意义的东西的时间。")])]),v._v(" "),t("li",[t("p",[v._v("First Meaningful Paint\n页面绘制出一些有用的文字或者图片信息。")])]),v._v(" "),t("li",[t("p",[v._v("Time to Interactive\n用户可以交互的时间。")])])])])}),[],!1,null,null,null);_.default=s.exports}}]);