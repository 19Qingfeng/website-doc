(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{363:function(v,_,t){"use strict";t.r(_);var e=t(42),l=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"渲染优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#渲染优化"}},[v._v("#")]),v._v(" 渲染优化")]),v._v(" "),t("h2",{attrs:{id:"现代浏览器渲染原理-关键渲染路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#现代浏览器渲染原理-关键渲染路径"}},[v._v("#")]),v._v(" 现代浏览器渲染原理 关键渲染路径")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2021/02/01/hbGkuzE3Dn1CRTU.png",alt:"截屏2021-02-01 下午9.03.41.png"}})]),v._v(" "),t("p",[v._v("渲染流程一共就是这五步。")]),v._v(" "),t("p",[v._v("从用户输入 URL 到页面渲染经历的过程。")]),v._v(" "),t("ol",[t("li",[v._v("通过域名定向到 IP 进行解析。(DNS 解析)")]),v._v(" "),t("li",[v._v("TCP 三次握手建立链接。")]),v._v(" "),t("li",[v._v("链接成功，客户端向服务端请求发送资源。")]),v._v(" "),t("li",[v._v("浏览器得到请求的资源开始渲染。")]),v._v(" "),t("li",[v._v("从 html 中构建 DOMTree。(浏览器把文本转化为单个字符，识别尖括号)")]),v._v(" "),t("li",[v._v("构建 CSSOM")]),v._v(" "),t("li",[v._v("结合 CSSOM 和 DOM 构建 RenderTree(比如去掉一些 display 节点)")]),v._v(" "),t("li",[v._v("根据 RenderTree 的尺寸进行布局和绘制。")])]),v._v(" "),t("p",[t("strong",[v._v("关于布局和渲染就会不得不提到关键渲染路径")]),v._v(":")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2021/02/01/qnYcTONFuJLMd8X.png",alt:"截屏2021-02-01 下午9.53.46.png"}})]),v._v(" "),t("ul",[t("li",[t("p",[t("code",[v._v("js")]),v._v("这个过程是说通过 JS 实现一些页面的变化的时候，比如说添加一个 DOM 元素，或者使用 js 做动画(通过 css 也可以)，触发视觉变化。")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("style")]),v._v("之后就是通过"),t("code",[v._v("style")]),v._v("计算样式，计算新的 css 规则。")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("layout")]),v._v("接下来进入第三步，将每一个计算后的元素的大小和位置进行布局。(回流)")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("paint")]),v._v("然后让浏览器进行绘制，"),t("code",[v._v("Paint")]),v._v("这一步是浏览器真正进行绘制画大小画图片画阴影的过程。(重绘)")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("composite")]),v._v("进行复合图层，将不同的图层联系起来。")])])]),v._v(" "),t("blockquote",[t("p",[t("code",[v._v("layout")]),v._v("和"),t("code",[v._v("paint")]),v._v("是2个关键的性能消耗环节。而l"),t("code",[v._v("layout thrashing")]),v._v("发生的根本原因还是不停强制进行layout造成的("),t("strong",[v._v("让浏览器不停的强制触发布局-forcedReflow-layoutThrashing")]),v._v(")。")])]),v._v(" "),t("p",[v._v("首次渲染必须经过这五个步骤进行处理。之后每一次样式的变化理论上会都会经历。")]),v._v(" "),t("p",[t("strong",[v._v("但是有一些样式的变化并不会影响布局"),t("code",[v._v("layout")]),v._v("和"),t("code",[v._v("paint")])]),v._v(",所以浏览器进行了优化，如果是这样的样式那么就不进行"),t("code",[v._v("layout")]),v._v("和"),t("code",[v._v("paint")]),v._v("，这样就大大加快了渲染速度。（注意日常开发中配合"),t("code",[v._v("will-change属性")]),v._v("）")])])}),[],!1,null,null,null);_.default=l.exports}}]);